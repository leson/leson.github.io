<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Linux - Shell Skills | 逢山开路，遇水架桥。</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="
基础知识
变量及基础数据结构
自定义变量

x=5         #定义变量
$x          #引用变量
echo $x     #显示变量
&quot;$PATH&quot;:/home/abc/software  #变量拼接

#运算 ：let [] (())
let no1++ ;
let no2+=3;
let result=no ...">
    
    <link rel="preload" href="/assets/css/0.styles.a81ed891.css" as="style"><link rel="preload" href="/assets/js/app.da2b1be3.js" as="script"><link rel="preload" href="/assets/js/6.98ca7309.js" as="script"><link rel="preload" href="/assets/js/11.3563294a.js" as="script"><link rel="preload" href="/assets/js/13.e608a33f.js" as="script"><link rel="prefetch" href="/assets/js/10.09a03a3a.js"><link rel="prefetch" href="/assets/js/12.fa6c3de2.js"><link rel="prefetch" href="/assets/js/14.6e0c7808.js"><link rel="prefetch" href="/assets/js/3.2d96c776.js"><link rel="prefetch" href="/assets/js/4.dba939aa.js"><link rel="prefetch" href="/assets/js/5.5d6780e3.js"><link rel="prefetch" href="/assets/js/7.04d4b705.js"><link rel="prefetch" href="/assets/js/8.e7cb864d.js"><link rel="prefetch" href="/assets/js/9.29dca1b9.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.90d888b3.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a81ed891.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/" class="nav-link home-link">逢山开路，遇水架桥。 </a></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/" class="nav-link">Home</a></li><li class="nav-item"><a href="/tag/" class="nav-link">Tags</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/" class="nav-link mobile-home-link">逢山开路，遇水架桥。 </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/" class="nav-link">Home</a></li><li class="mobile-nav-item"><a href="/tag/" class="nav-link">Tags</a></li> <li class="mobile-nav-item"><!----></li></ul></div></div></div> <div class="content-wrapper"><div><div class="content__default"><h1 id="基础知识"><a href="#基础知识" class="header-anchor">#</a> 基础知识</h1> <h2 id="变量及基础数据结构"><a href="#变量及基础数据结构" class="header-anchor">#</a> 变量及基础数据结构</h2> <h3 id="自定义变量"><a href="#自定义变量" class="header-anchor">#</a> 自定义变量</h3> <div class="language- extra-class"><pre class="language-text"><code>x=5         #定义变量 
$x          #引用变量
echo $x     #显示变量
&quot;$PATH&quot;:/home/abc/software  #变量拼接

#运算 ：let [] (()) 
let no1++ ; 
let no2+=3; 
let result=no1+no2; 
no2=$[ no2 + 1 ]; 
result1=$(( no1+no2+3 )); #推荐这种用法

declare -i xxx #将xxx 定义成integer 
-x  #将变量定义成环境变量。等同export var=&quot;abc&quot;

</code></pre></div><h3 id="环境变量"><a href="#环境变量" class="header-anchor">#</a> 环境变量</h3> <div class="language- extra-class"><pre class="language-text"><code>#path
echo $PATH 
#PS1 
echo &quot;$PS1,$PS2,$PS4&quot;
</code></pre></div><h3 id="位置参数变量"><a href="#位置参数变量" class="header-anchor">#</a> 位置参数变量</h3> <blockquote><p><strong>$n</strong> : n 为数字，$0代表命令本身， $1-$9代表第一到第九个参数，如果十个以上的参数需要用大括号，如 ${10}.</p></blockquote> <blockquote><p><strong>$</strong>* : 这个变量代表命令行中的所有参数，$*把所有的参数年成一个整体。</p></blockquote> <blockquote><p><strong>$@</strong> : 这个变量也代表命令行中所有的参数，不过$@把每个参数区分对待。</p></blockquote> <blockquote><p><strong>$#</strong> : 这个变量代表命令行中参数的个数。</p></blockquote> <h3 id="预定义变量"><a href="#预定义变量" class="header-anchor">#</a> 预定义变量</h3> <blockquote><p><strong>$?</strong> : 最后一次执行的命令的返回状。0为正确执行，非0为执行不正确。</p></blockquote> <blockquote><p><strong>$$</strong> : 当前进程 的进程号（PID）</p></blockquote> <blockquote><p><strong>$!</strong> : 后台运行的最后一个进程的进程号（PID）</p></blockquote> <h3 id="数组"><a href="#数组" class="header-anchor">#</a> 数组</h3> <div class="language- extra-class"><pre class="language-text"><code>a=()            #定义
a[0] = 5        #赋值
echo ${#a[@/*]} #读取a数组长度
${a[0]}         #取数组内容,下标对应的值
${a[*]},${a[@]} #取数组全部内容。
${a[@]:0:3}     #数组分片 ${a[@/*]:起始位置:长度} 
${a[@]/helo/hello}  #替换:${a[@/*]/查找字符/替换字符}

</code></pre></div><h3 id="关联数组"><a href="#关联数组" class="header-anchor">#</a> 关联数组</h3> <blockquote><p>只有在bash 4.0 以上版本才有效(<code>bash --version</code>)</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>#定义
declare -A a=([&quot;key1&quot;]=&quot;hello&quot; [&quot;key2&quot;]=&quot;world&quot;) 
#赋值
a[&quot;key3&quot;]=&quot;a bit difference&quot;   
#读取所有键
echo ${!a[*/@]}
#读取所有值
echo ${a[@/*]}
#根据键读取值
echo ${a[key3]}

#遍历数组(key和value)
for key in ${!a[@]}
do
    echo &quot;key=[$key];value=[${a[$key]}]&quot;
done


</code></pre></div><h3 id="变量内容的删除、取代与替换"><a href="#变量内容的删除、取代与替换" class="header-anchor">#</a> 变量内容的删除、取代与替换</h3> <div class="language- extra-class"><pre class="language-text"><code>echo ${PATH#/*:} #变量从左向右删除匹配的最短要求

echo ${PATH##/*:} #变量从左到右删除匹配的最长要求 （贪婪模式）
echo ${PATH%/*:} #变量从右到左删除匹配的最短要求

echo ${PATH%%/*:} #变量从右到左删除匹配的最长要求（贪婪模式）

echo ${PATH/home/HOME} #变量从左到右替换匹配的第一个

echo ${PATH//home/HOME} #变量从左到右替换所有匹配到的（贪婪模式）
</code></pre></div><h2 id="流程控制语句"><a href="#流程控制语句" class="header-anchor">#</a> 流程控制语句</h2> <h3 id="if-判断语句"><a href="#if-判断语句" class="header-anchor">#</a> if 判断语句</h3> <div class="language- extra-class"><pre class="language-text"><code>#结构如下：
if [ 条件 ];then
    #do something
fi 
</code></pre></div><p>==注意：‘[’前后均必须加空格,变量如要保证为空及含空格的多个单词时不出错就要加双引号.==</p> <div class="language- extra-class"><pre class="language-text"><code>if [ &quot;$aa&quot; = &quot;aa&quot; -a &quot;$bb&quot; = &quot;bb&quot; ] || [ &quot;$cc&quot; = &quot;cc&quot; -a &quot;$dd&quot; = &quot;dd&quot; ]; then
if [[ $1 != &quot;&quot; &amp;&amp; $# -eq 1 ]]; then
</code></pre></div><blockquote><p>数值判断</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>-eq (equal) 
-ne (not equal) 
-lt (less than) 
-gt (grant than) 
-ge (grant equal) 
-le (less equal)
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>$A=&quot;aa&quot; $?=0 $#=4
</code></pre></div><blockquote><p>字符判断 -z (zero 空为真) -n （not 非空为真）</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>[ -z &quot;&quot; ] &amp;&amp; echo &quot;yes&quot; || echo &quot;no&quot;
</code></pre></div><blockquote><p>文件类型判断</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>-b : 是块设备文件为真（block）
-c : 是字符设备文件为真（char）
-L : 是符号连接文件为真(link)
-d : 是目录为真（Directory） 
-e : exist 文件存在为真(exist)。
-s : 文件存在且内容非空为真。
-S : 是套接字文件为真（socket）。
-f : 是普通文件为真

[ -e /root/vicky/abc.log ] &amp;&amp; echo &quot;exist file&quot; || echo &quot;not exist file&quot;
</code></pre></div><blockquote><p>文件权限判断</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>-r : 文件有读权限为真（read）
-w : 文件有写权限为真(write)
-x : 文件有可执行权限为真（execute）
-u : 文件有suid 权限为真
-g ： 文件有sgid 权限为真
-k ： 文件有sbit 权限为真。
</code></pre></div><blockquote><p>多重条件判断</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>-a : and
-o: or
! : 非
</code></pre></div><h3 id="for-循环"><a href="#for-循环" class="header-anchor">#</a> for 循环</h3> <div class="language- extra-class"><pre class="language-text"><code>for file in $(ls ./) 
do 
    echo &quot;this my $file&quot;; 
done 
-----------------------------
sum=0
for (( i=1;i&lt;=100;i=i+1 ))
do
    sum=$(( $sum+$i ))
done

</code></pre></div><h3 id="while-循环"><a href="#while-循环" class="header-anchor">#</a> while 循环</h3> <div class="language- extra-class"><pre class="language-text"><code>while [ $i -le 100 ]
do
    #do smthing
done
-------------------------
while read line
do
    echo $line
done &lt; test.txt
</code></pre></div><h3 id="case-esac"><a href="#case-esac" class="header-anchor">#</a> case esac</h3> <div class="language- extra-class"><pre class="language-text"><code>case &quot;$1&quot; in
start)
    echo &quot;start……&quot;
    ;;
stop)
    echo &quot;stop……&quot;
    ;;
*)
    echo &quot;Usage: $0 {start|stop}&quot;
    exit 2
esac
</code></pre></div><h1 id="正则表达式"><a href="#正则表达式" class="header-anchor">#</a> 正则表达式</h1> <h2 id="通配符与正则表达式"><a href="#通配符与正则表达式" class="header-anchor">#</a> 通配符与正则表达式</h2> <h2 id="通配符"><a href="#通配符" class="header-anchor">#</a> 通配符</h2> <blockquote><p>* : 匹配任意内容</p></blockquote> <blockquote><p>? : 匹配任意一个内容</p></blockquote> <blockquote><p>[] : 匹配中括号中的一个字符</p></blockquote> <h2 id="基础正则表达式"><a href="#基础正则表达式" class="header-anchor">#</a> 基础正则表达式</h2> <blockquote><p>* ： 前一个字符匹配0次或任意多次。</p></blockquote> <blockquote><p>. : 匹配除了换行符（\n）外任意一个字符。</p></blockquote> <blockquote><p>^ : 匹配行首。如:^hello 会匹配以hello 开头的行。</p></blockquote> <blockquote><p>$ : 匹配行尾。 如:hello$ 会匹配以hello 结尾的行。</p></blockquote> <blockquote><p>[] : 匹配中括号中指定的任意一个字符，只匹配一个字符。[a-z][0-9] 匹配小写字符和一位数字构成的两位字符。</p></blockquote> <blockquote><p>[^] : 匹配中括号的字符以外的任意一个字符。如：[^0-9] 匹配任意一位非数字字符。</p></blockquote> <blockquote><p>\ : 转义符。去除符号的特殊用法。</p></blockquote> <blockquote><p>{n} ： 表示其前面的字符恰好出现n次。如：[0-9]{4} 匹配4位数字。</p></blockquote> <blockquote><p>{n,} : 表示其前面的字符出现不小于n次。</p></blockquote> <blockquote><p>{n,m} : 表示其前面的字符至少出现n次，最多出现m次。如：[a-z]{6,8} 匹配6到8位的小写字符。</p></blockquote> <p>==注：以上三个大括号的用法其实要有定界符才能准确匹配，否则光看概念，与实际是有区别的。==</p> <h1 id="其它"><a href="#其它" class="header-anchor">#</a> 其它</h1> <blockquote><p>脚本中的语句不是在当前shell 进程 中执行的。</p></blockquote> <blockquote><p>这种方式可以将参数统一写到一个sh中，在另外一个shell 脚本 中引用 。</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>#变量设置成全局变量
export a=&quot;aaa&quot;
declare -x a=&quot;aaa&quot;

#将其它文件包含到当前进程。
. test.sh
source test.sh 
</code></pre></div><h2 id="同时执行多个脚本"><a href="#同时执行多个脚本" class="header-anchor">#</a> 同时执行多个脚本</h2> <div class="language- extra-class"><pre class="language-text"><code>#第一个命令成功则执行第二个命令
./hello.sh &amp;&amp; ./world.sh 

#第一个命令失败则执行第二个命令
./hello.sh || ./world.sh

#常用综合用法
ls oklar &amp;&amp; echo yes || echo no
</code></pre></div><h2 id="shell-调试-debug"><a href="#shell-调试-debug" class="header-anchor">#</a> <a href="https://github.com/leson/guides/blob/master/linux/shell_debug.md" target="_blank" rel="noopener noreferrer">shell 调试(debug)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h2> <div class="language- extra-class"><pre class="language-text"><code>sh -x aaa.sh

#还可以设置PS4让调试代码显示行号$LINENO
export PS4=&quot;+[${LINENO}] &quot;
</code></pre></div><h2 id="进程间通信"><a href="#进程间通信" class="header-anchor">#</a> 进程间通信</h2> <div class="language- extra-class"><pre class="language-text"><code>#pipe line (同一个父进程)
#name pipe (不同父进程)

mkfifo fifo
</code></pre></div><h2 id="一些规则"><a href="#一些规则" class="header-anchor">#</a> 一些规则</h2> <div class="language- extra-class"><pre class="language-text"><code>$(command) = ` command` #不建议使用倒引号，不能嵌套使用
</code></pre></div><h1 id="reference-links"><a href="#reference-links" class="header-anchor">#</a> Reference Links</h1> <ul><li><p><a href="http://note.youdao.com/noteshare?id=b7006c9637c694fc088531a7e3d1fa46" target="_blank" rel="noopener noreferrer">linux shell quick start<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="http://note.youdao.com/noteshare?id=255a7f4991e565426e4ae942b7287da0" target="_blank" rel="noopener noreferrer">common commands<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="http://note.youdao.com/noteshare?id=3a26f3d2ce9cdd864d1b238ceecdaba3" target="_blank" rel="noopener noreferrer">shell debug<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ul></div></div></div> <footer class="footer" data-v-3d9deeb8><div class="footer-left-wrap" data-v-3d9deeb8><ul class="contact" data-v-3d9deeb8><li class="contact-item" data-v-3d9deeb8><a href="https://github.com/vuejs/vuepress" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-3d9deeb8><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" data-v-3d9deeb8><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" data-v-3d9deeb8></path></svg>
          
        </a></li><li class="contact-item" data-v-3d9deeb8><a href="https://github.com/vuejs/vuepress" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-3d9deeb8><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter" data-v-3d9deeb8><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z" data-v-3d9deeb8></path></svg>
          
        </a></li></ul></div> <div class="footer-right-wrap" data-v-3d9deeb8><ul class="copyright" data-v-3d9deeb8></ul></div></footer></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.da2b1be3.js" defer></script><script src="/assets/js/6.98ca7309.js" defer></script><script src="/assets/js/11.3563294a.js" defer></script><script src="/assets/js/13.e608a33f.js" defer></script>
  </body>
</html>
